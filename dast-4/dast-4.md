
## Часть 4. Дедупликация и триаж
Для оценки результатов фаззинг-тестирования требуется:
- провести анализ сгенерированных падений (crashes) и зависаний (hangs)

В ходе выполнения заданий 4 части у нас должны получиться следующие артефакты работы:
- скриншоты процесса выполнения задания и запущенного процесса фаззинга libvirt с помощью AFLplusplus;
- директория out/ со сгенерированными фаззером файлами.
- директория casr-out, содержащая результаты анализа утилитой CASR;
- скриншот анализа указанной сработки (открытого файла отчета с расширением `.casrep`) с помощью casr-cli;
- патч, исправляющий вызвавшую падение ошибку.

Поскольку у нас нет возможности быстро накопить большой корпус падений, для которого нужно было бы проводить триаж и дедупликацию, для знакомства с дедупликацией и триажом наработанных срабатываний воспользуемся инструкцией по фаззинг-тестированию libvirt, с помощью которого была обнаружена уязвимость CVE-2024-1441.
Инструкция доступна по ссылке: https://www.altlinux.org/Libvirt_fuzzing_technique
Требуется выполнить инструкции до блока Run fuzzing (включительно).

После запуска фаззинга libvirt, предлагается проанализировать наработанные за 90 дней работы данного фаззинг-теста падения, находящиеся в директории afl-out/

Для этого воспользуемся утилитой CASR.
Установим её:
```shell
# For ALT Linux
sudo apt-get install casr

# For other distros
git clone https://github.com/ispras/casr
cd casr
cargo build --release
```

Запустим анализ (обратите внимание на возможную необходимость корректировки путей):
```shell
export LD_PRELOAD=" /fuzz/preeny/src/desock.so"

casr-afl -f -i /dast-labs/afl-out/ -o /dast-labs/casr-out -t 1
```

С помощью утилиты `casr-cli` найдите среди результатов анализа сработку в файле `src/interface/interface_backend_udev.c:225` - уязвимость, эксплуатирующая это падение впоследствии и получила идентификатор CVE-2024-1441.
Подготовьте патч, исправляющий ошибку, приводящую к укзанному падению.

Если сработка в этом файле не была обнаружена после использования `casr-afl`, можно воспользоваться заранее подготовленной директорией casr-out, находящейся в папке backup.

Дополнительно:
- Попробуйте проанализировать и исправить другие прошедшие дедупликацию сработки.
